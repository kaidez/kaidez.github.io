<!-- Simplified Search Component -->
<div class="search-container">

    <div id="search" class="pagefind-search">
        <p style="color: blue;"></p>
    </div>
</div>

<script>
    // Wait a bit longer for everything to load
    setTimeout(() => {
        console.log('Initializing PagefindUI...');
        
        const searchElement = document.getElementById('search');
        if (!searchElement) {
            console.error('Search element not found');
            return;
        }
        
        // Check if PagefindUI is available
        if (typeof PagefindUI === 'undefined') {
            console.error('PagefindUI not found - creating fallback input');
            searchElement.innerHTML = '<input type="text" placeholder="Search kaidez" style="width: 100%; padding: 12px; border: 2px solid #ccc; border-radius: 8px; font-size: 16px; pointer-events: auto;">';
            return;
        }
        
        try {
            // Clear any existing content
            searchElement.innerHTML = '';
            
            const pagefind = new PagefindUI({ 
                element: "#search",
                showImages: false,
                showSubResults: true,
                excerptLength: 15,
                translations: {
                  placeholder: "Search kaidez...",
                  zero_results: "Couldn't find [SEARCH_TERM]"
                }
            });
            console.log('PagefindUI initialized successfully');
            
            // Ensure the input is interactive
            setTimeout(() => {
                const input = searchElement.querySelector('input');
                if (input) {
                    input.style.pointerEvents = 'auto';
                    input.removeAttribute('readonly');
                    input.removeAttribute('disabled');
                }
            }, 500);
            
        } catch (error) {
            console.error('Error initializing PagefindUI:', error);
            searchElement.innerHTML = '<input type="text" placeholder="Search kaidez(fallback)..." style="width: 100%; padding: 12px; border: 2px solid #ccc; border-radius: 8px; font-size: 16px; pointer-events: auto;">';
        }
    }, 1000);
</script>

<style>
/* Simple search styling */
.search-container {
    width: 295px;
    border-radius: 4px;
}

.pagefind-search {
    width: 100%;
    min-height: 50px;
}

/* Style the Pagefind input */
.pagefind-ui__search-input {
    width: 100% !important;
    padding: 12px 16px !important;
    border: 2px solid #cccccc !important;
    border-radius: 8px !important;
    background: #ffffff !important;
    color: #333333 !important;
    font-size: 16px !important;
    font-family: Arial, sans-serif !important;
    min-height: 20px !important;
    display: block !important;
    visibility: visible !important;
}

.pagefind-ui__search-input:focus {
    border-color: var(--color-primary) !important;
    outline: none !important;
    box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1) !important;
}

/* Style the results */
.pagefind-ui__results {
    margin-top: var(--space-2) !important;
    background: var(--color-surface) !important;
    border: 1px solid var(--color-border) !important;
    border-radius: var(--border-radius) !important;
    box-shadow: var(--shadow-lg) !important;
    max-height: 400px !important;
    overflow-y: auto !important;
}

.pagefind-ui__result {
    padding: var(--space-4) !important;
    border-bottom: 1px solid var(--color-border) !important;
}

.pagefind-ui__result:last-child {
    border-bottom: none !important;
}

.pagefind-ui__result-link {
    color: var(--color-text) !important;
    text-decoration: none !important;
}

.pagefind-ui__result-link:hover {
    color: var(--color-primary) !important;
}

.pagefind-ui__result-title {
    font-weight: 600 !important;
    font-size: var(--text-lg) !important;
    margin-bottom: var(--space-2) !important;
}

.pagefind-ui__result-excerpt {
    color: var(--color-text-muted) !important;
    font-size: var(--text-sm) !important;
}

.pagefind-ui__result-excerpt mark {
    background: rgba(37, 99, 235, 0.2) !important;
    color: var(--color-primary) !important;
    padding: 0 2px !important;
    border-radius: 2px !important;
}

@media (max-width: 768px) {
    .search-container {
        max-width: 100%;
    }
}
</style>
